{% extends "base.html" %}
{% import '_pagination_controls.html' as pagination_macros with context %} {# IMPORT ADDED HERE #}

{% block title %}{{ _('Resource Management - Smart Resource Booking') }}{% endblock %}

{% block content %}
    <h1>{{ _('Resource Management') }}</h1>
    {# ... buttons ... #}
    <button id="add-new-resource-btn" class="button">{{ _('Add New Resource') }}</button>
    <button id="add-bulk-resource-btn" class="button" style="margin-left:5px;">{{ _('Bulk Add Resources') }}</button>
    <button id="bulk-edit-btn" class="button" style="margin-left:5px;">{{ _('Bulk Edit') }}</button>
    <button id="bulk-delete-btn" class="button danger" style="margin-left:5px;">{{ _('Bulk Delete') }}</button>
    <button id="export-all-resources-btn" class="button" style="margin-left:5px;">{{ _('Export All Resources') }}</button>
    <input type="file" id="import-resources-file" accept=".json" style="margin-left: 10px; display: none;">
    <button id="import-resources-btn" class="button" style="margin-left:5px;">{{ _('Import Resources from JSON') }}</button>

    <div class="filters-section" style="margin-top:15px;">
        {# ... filter inputs ... #}
        <h3>{{ _('Filters') }}</h3>
        <label for="resource-filter-name">{{ _('Name:') }}</label>
        <input type="text" id="resource-filter-name" placeholder="{{ _('Filter by Name') }}">

        <label for="resource-filter-status">{{ _('Status:') }}</label>
        <select id="resource-filter-status">
            <option value="">{{ _('-- Any --') }}</option>
            <option value="draft">{{ _('Draft') }}</option>
            <option value="published">{{ _('Published') }}</option>
            <option value="archived">{{ _('Archived') }}</option>
        </select>

        <label for="resource-filter-map">{{ _('Floor Map:') }}</label>
        <select id="resource-filter-map">
            <option value="">{{ _('-- Any --') }}</option>
        </select>

        <label for="resource-filter-tags">{{ _('Group/Tags:') }}</label>
        <input type="text" id="resource-filter-tags" placeholder="{{ _('Filter by Group') }}">

        <button id="resource-apply-filters-btn" class="button">{{ _('Apply Filters') }}</button>
        <button id="resource-clear-filters-btn" class="button">{{ _('Clear Filters') }}</button>
    </div>

    <div id="bulk-pin-actions-area" style="margin-top: 10px; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; background-color: #f9f9f9; display: none;">
        {# ... bulk pin actions ... #}
    </div>

    <div id="resource-management-status" class="status-message" style="margin-top: 15px;"></div>

    {# JS PAGINATION CONTROLS ADDED HERE #}
    {{ pagination_macros.render_js_pagination_controls('resource_pg_') }}

    {# SCROLLABLE CONTAINER ADDED HERE #}
    <div class="scrollable-table-container">
        <table id="resources-table" class="styled-table">
            <thead>
                <tr>
                    <th><input type="checkbox" id="select-all-resources"></th>
                    <th>{{ _('ID') }}</th>
                    <th>{{ _('Name') }}</th>
                    <th>{{ _('Status') }}</th>
                    <th>{{ _('Capacity') }}</th>
                    <th>{{ _('Tags') }}</th>
                    <th>{{ _('Actions') }}</th>
                </tr>
            </thead>
            <tbody>
                <!-- Resource rows will be populated by JavaScript -->
            </tbody>
        </table>
    </div> {# END SCROLLABLE CONTAINER #}

    {# ... modals ... #}
    <div id="resource-form-modal" class="modal" style="display: none;">
        {# ... #}
    </div>
    <div id="bulk-resource-modal" class="modal" style="display: none;">
        {# ... #}
    </div>
    <div id="bulk-edit-modal" class="modal" style="display: none;">
        {# ... #}
    </div>
    <div id="qr-code-modal" class="modal" style="display: none; text-align: center;">
        {# ... #}
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/resource_management.js') }}" defer></script>
{% endblock %}
