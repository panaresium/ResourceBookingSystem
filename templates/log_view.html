{% extends "base.html" %}

{% block title %}{{ _('Audit Logs - Smart Resource Booking') }}{% endblock %}

{% block head_extra %}
<style>
    .filters-section {
        margin-bottom: 20px;
        padding: 15px;
        background-color: #f9f9f9;
        border: 1px solid #eee;
        border-radius: 5px;
    }
    .filters-section label { margin-right: 5px; }
    .filters-section input[type="date"],
    .filters-section input[type="text"],
    .filters-section select {
        margin-right: 15px;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    .filters-section button { padding: 8px 15px; }
</style>
{% endblock %}

{% block content %}
    <h1>{{ _('Audit Logs') }}</h1>
    <div id="log-view-status" class="status-message" style="margin-bottom: 15px;"></div>

    <div class="filters-section">
        <h3>{{ _('Filters') }}</h3>
        <label for="log-filter-start-date">{{ _('Start Date:') }}</label>
        <input type="date" id="log-filter-start-date" name="log_filter_start_date">

        <label for="log-filter-end-date">{{ _('End Date:') }}</label>
        <input type="date" id="log-filter-end-date" name="log_filter_end_date">

        <label for="log-filter-username">{{ _('Username:') }}</label>
        <input type="text" id="log-filter-username" name="log_filter_username" placeholder="{{ _('Filter by Username') }}">

        <label for="log-filter-action">{{ _('Action Type:') }}</label>
        <input type="text" id="log-filter-action" name="log_filter_action" placeholder="{{ _('Filter by Action') }}">

        <button id="log-apply-filters-btn" class="button">{{ _('Apply Filters') }}</button>
        <button id="log-clear-filters-btn" class="button">{{ _('Clear Filters') }}</button>
    </div>

    <table id="audit-log-table" class="styled-table">
        <thead>
            <tr>
                <th>{{ _('Timestamp') }}</th>
                <th>{{ _('User ID') }}</th>
                <th>{{ _('Username') }}</th>
                <th>{{ _('Action') }}</th>
                <th>{{ _('Details') }}</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <div id="pagination-controls" style="margin-top: 20px; text-align: center;">
        <button id="prev-page-btn" class="button" disabled>&laquo; {{ _('Previous') }}</button>
        <span id="page-info" style="margin: 0 15px;">{{ _('Page 1 of 1') }}</span>
        <button id="next-page-btn" class="button" disabled>{{ _('Next') }} &raquo;</button>
        <br>
        <span id="total-logs-info" style="display: block; margin-top: 5px;"></span>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/log_view.js') }}" defer></script>
{% endblock %}
