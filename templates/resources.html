{% extends "base.html" %}

{% block title %}{{ _('Smart Resource Booking - Resource Availability') }}{% endblock %}

{% block content %}
    <h1>{{ _('Resource Availability') }}</h1>
    <div>
        <label for="availability-date">{{ _('Select Date:') }}</label>
        <input type="date" id="availability-date" name="availability-date">
    </div>

    <div class="filters-section" style="margin-top:15px;">
        <label for="resource-filter-capacity">{{ _('Min Capacity:') }}</label>
        <input type="number" id="resource-filter-capacity" min="1">

        <label for="resource-filter-equipment">{{ _('Equipment:') }}</label>
        <input type="text" id="resource-filter-equipment">

        <label for="resource-filter-tags">{{ _('Tags:') }}</label>
        <input type="text" id="resource-filter-tags">

        <button id="resource-apply-filters-btn" class="button">{{ _('Apply Filters') }}</button>
        <button id="resource-clear-filters-btn" class="button">{{ _('Clear Filters') }}</button>
    </div>

    <div id="resources-page-status" class="alert" style="display:none; margin-top:15px;"></div> <!-- Added status div -->
    <div id="resource-loading-status" class="status-message" style="margin-bottom: 15px;"></div>
    <div id="resource-buttons-container" class="resource-buttons-grid" style="margin-top: 20px;">
        <!-- Resource buttons will be populated by JavaScript -->
        <p>{{ _('Loading resources...') }}</p>
    </div>

    {% include '_booking_modal.html' %} {# Include the shared modal #}

{% endblock %}

{% block scripts %}
    {{ super() }}
    <script>
        // Make username available to scripts
        document.addEventListener('DOMContentLoaded', function() {
            {% if current_user and current_user.is_authenticated %}
                document.body.dataset.userName = "{{ current_user.username }}";
            {% else %}
                document.body.dataset.userName = ""; // Set to empty if no user or not authenticated
            {% endif %}
        });
    </script>
    <script src="{{ url_for('static', filename='js/booking_modal_handler.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/resource_booking.js') }}" defer></script>
{% endblock %}
